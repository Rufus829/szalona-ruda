<script>
async function search() {
  const q = document.getElementById("q").value.trim();
  const results = document.getElementById("results");

  if (!q) {
    results.innerText = "Skriv något!";
    return;
  }

  results.innerText = "Söker...";

  try {
    const res = await fetch("https://white-thunder-be12.20rufus11.workers.dev/?q=" + encodeURIComponent(q));

    const data = await res.json();
    console.log(data);

    if (!data.organic_results) {
      results.innerText = "Inga resultat hittades.";
      return;
    }

    results.innerHTML = data.organic_results.map(r => `
      <div style="margin:20px 0;">
        <a href="${r.link}" target="_blank" style="font-size:18px;">
          ${r.title}
        </a>
        <p>${r.snippet || ""}</p>
      </div>
    `).join("");

  } catch (error) {
    results.innerText = "Fel vid hämtning.";
    console.error(error);
  }
}
</script>
